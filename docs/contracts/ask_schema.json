{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sirios.ai/schemas/ask_schema.json",
  "title": "Sirios Mosaic /ask response schema",
  "description": "Contrato oficial da rota POST /ask após modularização via Orchestrator.",
  "type": "object",
  "required": ["request_id", "entity", "rows", "data", "meta"],
  "properties": {
    "request_id": {
      "type": "string",
      "format": "uuid",
      "description": "Identificador único da requisição."
    },
    "entity": {
      "type": "string",
      "description": "Nome da view (entidade) resolvida pela pergunta NL."
    },
    "rows": {
      "type": "integer",
      "minimum": 0,
      "description": "Quantidade de registros retornados."
    },
    "data": {
      "type": "array",
      "description": "Lista de registros (cada registro é um dicionário com colunas e valores).",
      "items": {
        "type": "object",
        "additionalProperties": true
      }
    },
    "meta": {
      "type": "object",
      "required": ["elapsed_ms"],
      "properties": {
        "elapsed_ms": {
          "type": "integer",
          "description": "Tempo total de execução (ms)."
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "request_id": "9a31c9b4-4e25-45a9-ae79-4376d75e5f30",
      "entity": "view_fiis_info",
      "rows": 3,
      "data": [
        {
          "ticker": "VINO11",
          "setor": "Lajes Corporativas",
          "gestao": "Ativa",
          "publico_alvo": "Investidores em geral"
        }
      ],
      "meta": { "elapsed_ms": 124 }
    }
  ]
}
